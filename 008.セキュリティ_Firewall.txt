# Firewallについて

## 文書管理

申請者：柏木
確認者：関PL

---------------------------------------
### 改訂履歴

|日付|改訂者|内容|
|---|---|---|
| 20171003 | SNC柏木 | 初版 |

---------------------------------------
## はじめに

攻撃者は実際に攻撃を行う前にシステムに関する情報を収集します。
情報収取の方法は、redmine「008.セキュリティ_攻撃者が行う情報収集」に記載しているように
「スキャニング」や「スニフィング」を実施し、情報を収集します。
その対応策としてFirewall(以降、「FW」と記載)がありますが、
ここではFWの機能やFWで防御できないことについて紹介していきます。

---------------------------------------
## FWとは
FWは日本語では「防火壁」を意味します。
FWは不要な通信を遮断することができます。
従いまして、FWを利用することで、
ネットワークのセグメント単位での防御することが可能になります。

### FWの機能
基本的にFWには、以下の機能があります。

* 通信データのアクセス制御(フィルタ機能)
* NAT機能
* ログ機能

### FWの防御方法
どのようにしてFWでネットワークセグメント単位で防御を実施するのか。それは
上記で紹介した「フィルタ機能」を利用して実現します。
フィルタ機能は、FWに通信データの通過を許可/拒否のルールを設定し、
それにより、不要な通信を遮断します。
そして、FWのフィルタ機能には種類がありますので、以下に紹介します。

##### 1.パケットフィルタリング型
パケットフィルタリング型は、主にIPパケットのヘッダ部分を参照することによって、
アクセスを制御します。
具体的に、以下の部分をチェックして、アクセス制御を実施します。
* 送信元IPアドレス
* 宛先IPアドレス
* 送信元ポート番号
* 宛先ポート番号

※　パケットフィルタリング型についての詳細は、redmine
「008.セキュリティ_パケットフィルタリング」を参照

以下にパケットフィルタリング型の特徴を記載します。

|項目|内容|
|---|---|
| メリット |レイヤ3のためフィルタ処理速度が速い |
| デメリット |詳細なフィルタが不可|

##### 2.サーキットゲートウェイ型
サーキットゲートウェイ型は、トランスポート層を利用してアクセスを制御します。
具体的に、以下の部分をチェックして、アクセス制御を実施します。
* 制御ビット(セッション状態を認識した上でアクセス制御)

以下にサーキットゲートウェイ型の特徴を記載します。

|項目|内容|
|---|---|
| メリット | パケットフィルタリング型よりも詳細なフィルタが可能かつ、ログも詳細 |
| デメリット | レイヤ4レベルのフィルタを実施するためパケットフィルタリング型よりも処理は遅い |

##### 3.アプリケーションゲートウェイ型
アプリケーションゲートウェイ型は、アプリケーション層を利用してアクセスを制御します。
具体的に、以下の部分をチェックして、アクセス制御を
実施します。
* アプリケーションレベルのコマンド

以下にサーキットゲートウェイ型の特徴を記載します。

|項目|内容|
|---|---|
| メリット | 詳細なフィルタが可能、詳細なログの採取が可能 |
| デメリット | フィルタ機能の処理速度は遅い |

## デフォルトルール
FWのフィルタ機能には、必ずデフォルトルールがあります。
デフォルトルールとは、FWのルールの最後に設定されているルールのことです。
デフォルトルールは以下の2つのうちどちらが設定されています。

* すべて拒否
* すべて許可

※一般的に多くのFWで「すべて拒否」が設定されています。
これはセキュリティを考慮して設定されています。


## FWで防ぐことが出来ないこと
以下にFWにできないことを紹介します。

* FWを経由しない通信のアクセス制御
* ウイルス対策
* 悪意のあるユーザからの攻撃の検知
* フィルタ機能で設定したルールを利用した攻撃


---------------------------------------
## 索引、関連項目

* [総務省](http://www.soumu.go.jp/main_sosiki/joho_tsusin/security_previous/kiso/k01_firewall.htm)

* [参考1](http://www.atmarkit.co.jp/ait/articles/0105/17/news002.html)

* [参考2](http://www.atmarkit.co.jp/ait/articles/0203/01/news002.html)


***
